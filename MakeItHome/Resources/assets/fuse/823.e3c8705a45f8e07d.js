"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[823],{9823:(Pt,Q,a)=>{a.r(Q),a.d(Q,{default:()=>Vt});var _=a(6814),p=a(2296),b=a(3680),u=a(4170),d=a(617),C=a(4516),v=a(2651),K=a(4748),t=a(9212),A=a(9236);function Y(n,r){1&n&&t.GkF(0)}const H=n=>({$implicit:n});let G=(()=>{class n{constructor(e){this._fuseMediaWatcherService=e,this.items=[],this.distributedColumns=[]}ngOnChanges(e){"columns"in e&&this._distributeItems(),"items"in e&&this._distributeItems()}ngAfterViewInit(){this._distributeItems()}_distributeItems(){if(0!==this.items.length){this.distributedColumns=Array.from(Array(this.columns),e=>({items:[]}));for(let e=0;e<this.items.length;e++)this.distributedColumns[e%this.columns].items.push(this.items[e])}else this.distributedColumns=[]}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(A.T))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["fuse-masonry"]],inputs:{columnsTemplate:"columnsTemplate",columns:"columns",items:"items"},exportAs:["fuseMasonry"],standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:4,consts:[[1,"flex"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.YNc(1,Y,1,0,"ng-container",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngTemplateOutlet",i.columnsTemplate)("ngTemplateOutletContext",t.VKq(2,H,i.distributedColumns)))},dependencies:[_.tP],encapsulation:2,data:{animation:K.L}})}return n})();var L=a(6263),g=a(6223),F=a(5986),m=a(7700),T=a(7988),x=a(8645),M=a(2096),N=a(9773),D=a(3620),y=a(4664),k=a(7398),E=/\s/;var j=/^\s+/;const V=function z(n){return n&&n.slice(0,function R(n){for(var r=n.length;r--&&E.test(n.charAt(r)););return r}(n)+1).replace(j,"")};var B=a(5829),W=a(7106),X=/^[-+]0x[0-9a-f]+$/i,P=/^0b[01]+$/i,tt=/^0o[0-7]+$/i,et=parseInt;var O=1/0;const rt=function st(n){return n?(n=function nt(n){if("number"==typeof n)return n;if((0,W.Z)(n))return NaN;if((0,B.Z)(n)){var r="function"==typeof n.valueOf?n.valueOf():n;n=(0,B.Z)(r)?r+"":r}if("string"!=typeof n)return 0===n?n:+n;n=V(n);var e=P.test(n);return e||tt.test(n)?et(n.slice(2),e?2:8):X.test(n)?NaN:+n}(n))===O||n===-O?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0},at=function ct(n){var r=rt(n),e=r%1;return r==r?e?r-e:r:0};var Z=a(2660),f=a(5619),h=a(9397),lt=a(8180),_t=a(8504),I=a(8203),gt=a(9862);let w=(()=>{class n{constructor(e){this._httpClient=e,this._labels=new f.X([]),this._note=new f.X(null),this._notes=new f.X([])}get labels$(){return this._labels.asObservable()}get notes$(){return this._notes.asObservable()}get note$(){return this._note.asObservable()}getLabels(){return this._httpClient.get("api/apps/notes/labels").pipe((0,h.b)(e=>{console.log("get labels response",e),this._labels.next(e)}))}addLabel(e){const o={id:I.Eq.guid(),title:e};return this._labels.getValue().push(o),this._httpClient.post("api/apps/notes/labels",this._labels).pipe((0,h.b)(s=>{this._labels.next(s)}))}updateLabel(e){let o=this._labels.getValue();return this._labels.next(o.map(i=>i.id==i.id?{...i,title:i.title}:i)),this.updateLabels()}updateLabels(){return this._httpClient.patch("api/apps/notes/labels",this._labels.getValue()).pipe((0,h.b)(e=>{this.getNotes().subscribe(),this._labels.next(e)}))}deleteLabel(e){let o=this._labels.getValue(),i=this._notes.getValue();return o=o.filter(s=>s.id!==e),this._labels.next(o),i=i.map(s=>({...s,labels:s.labels.filter(c=>c!==e)})),this._notes.next(i),this.updateNotes().subscribe(),this.updateLabels()}getNotes(){return this._httpClient.get("api/apps/notes").pipe((0,h.b)(e=>{console.log("Get notes response: ",e);for(let o of e)for(let i in o.labels)o.labels[i]||o.labels.splice(at(i),1);this._notes.next(e)}))}getNoteById(e){return this._notes.pipe((0,lt.q)(1),(0,k.U)(o=>{const i=o.find(s=>s.id===e)||null;return this._note.next(i),i}),(0,y.w)(o=>o?(0,M.of)(o):(0,_t._)("Could not found the note with id of "+e+"!")))}addTask(e,o){let i=this._notes.getValue();return i=i.map(s=>s.id===e.id?(s.tasks||(s.tasks=[]),s.tasks.push({id:I.Eq.guid(),content:o,completed:!1}),e=(0,Z.Z)(s),{...s}):s),this._note.next(e),this._notes.next(i),this.updateNotes().subscribe(),this.note$}createNote(e){e.id=I.Eq.guid(),e.labels=e.labels||[],e.tasks=e.tasks||[],e.createdAt=(new Date).toISOString();let o=this._notes.getValue()||[];return o.push(e),this._notes.next(o),this.updateNotes().subscribe(),this._note.next(e),this.note$}updateNote(e){const o=(0,Z.Z)(e);this._note.next(o);let i=this._notes.value,s=!1;for(let c in i)if(i[c].id==o.id){i[c]=o,s=!0;break}return console.log("updating notes: ",i),this._notes.next(i),this.updateNotes().subscribe(),this.note$}updateNotes(){let e=this._notes.getValue();return this._httpClient.post("api/apps/notes",e).pipe((0,h.b)(o=>{U(o,e)||setTimeout(()=>{this.updateNotes().subscribe()},100)}))}deleteNote(e){let o=new f.X(!1),i=e.id,s=this._notes.getValue();return s.forEach((c,l)=>{c.id===i&&(s.splice(l,1),this._notes.next(s),o.next(!0))}),this.updateNotes().subscribe(),o.asObservable()}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(gt.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U(n,r){if(typeof n!=typeof r)return!1;if(n===r)return!0;if(null===n||null===r)return!1;if("object"==typeof n&&"object"==typeof r){const e=Object.keys(n),o=Object.keys(r);if(e.length!==o.length)return!1;for(const i of e)if(!U(n[i],r[i]))return!1;return!0}return!1}function pt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"div",7)(3,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,s=t.oxw();return t.KtG(s.removeImage(i))}),t._UZ(4,"mat-icon",9),t.qZA()(),t._UZ(5,"img",10),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(1),t.Q6J("src",e.image,t.LSH)}}const ut=n=>({"text-secondary line-through":n});function mt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17)(2,"mat-checkbox",18),t.NdJ("ngModelChange",function(i){const c=t.CHM(e).$implicit;return t.KtG(c.completed=i)})("change",function(){const s=t.CHM(e).$implicit,c=t.oxw(2).ngIf,l=t.oxw();return t.KtG(l.updateTaskOnNote(c,s))}),t.qZA(),t.TgZ(3,"input",19),t.NdJ("ngModelChange",function(i){const c=t.CHM(e).$implicit;return t.KtG(c.content=i)})("input",function(){const s=t.CHM(e).$implicit,c=t.oxw(2).ngIf,l=t.oxw();return t.KtG(l.updateTaskOnNote(c,s))}),t.qZA(),t.TgZ(4,"mat-icon",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2).ngIf,l=t.oxw();return t.KtG(l.removeTaskFromNote(c,s))}),t.qZA()(),t.BQk()}if(2&n){const e=r.$implicit;t.xp6(2),t.Q6J("color","primary")("ngModel",e.completed),t.xp6(1),t.Q6J("ngClass",t.VKq(6,ut,e.completed))("placeholder","Task")("ngModel",e.content),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:x-mark")}}function dt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t.YNc(2,mt,5,8,"ng-container",12),t.TgZ(3,"div",13),t._UZ(4,"mat-icon",14),t.TgZ(5,"input",15,16),t.NdJ("keydown.enter",function(){t.CHM(e);const i=t.MAs(6),s=t.oxw().ngIf;return t.oxw().addTaskToNote(s,i.value),t.KtG(i.value="")}),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw().ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tasks)("ngForTrackBy",o.trackByFn),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:plus"),t.xp6(1),t.Q6J("placeholder","Add task")}}function ft(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",22)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",23),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2).ngIf,l=t.oxw();return t.KtG(l.toggleLabelOnNote(c,s))}),t.qZA()(),t.BQk()}if(2&n){const e=r.$implicit;t.xp6(3),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:x-circle")}}function xt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",21),t.YNc(2,ft,5,2,"ng-container",12),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.labels)("ngForTrackBy",o.trackByFn)}}function ht(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",24)(2,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,s=t.oxw();return t.KtG(s.createNote(i))}),t._uU(3," Save "),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw().ngIf;t.xp6(2),t.Q6J("color","primary")("disabled",!e.title&&!e.content)}}function bt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3).ngIf,l=t.oxw();return t.KtG(l.toggleLabelOnNote(c,s))}),t.TgZ(2,"span",13),t._UZ(3,"mat-checkbox",38),t.TgZ(4,"span",39),t._uU(5),t.qZA()()(),t.BQk()}if(2&n){const e=r.$implicit,o=t.oxw(3).ngIf,i=t.oxw();t.xp6(3),t.Q6J("color","primary")("checked",i.isNoteHasLabel(o,e)),t.xp6(2),t.Oqu(e.title)}}function Ct(n,r){if(1&n&&(t.ynx(0),t.YNc(1,bt,6,3,"ng-container",36),t.BQk()),2&n){const e=r.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function vt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",26)(2,"div",27)(3,"div",28)(4,"input",29,30),t.NdJ("change",function(){t.CHM(e);const i=t.MAs(5),s=t.oxw().ngIf,c=t.oxw();return t.KtG(c.uploadImage(s,i.files))}),t.qZA(),t.TgZ(6,"label",31),t._UZ(7,"mat-icon",32),t.qZA()(),t.TgZ(8,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,s=t.oxw();return t.KtG(s.addTasksToNote(i))}),t._UZ(9,"mat-icon",32),t.qZA(),t.TgZ(10,"button",33),t._UZ(11,"mat-icon",32),t.qZA(),t.TgZ(12,"mat-menu",null,34),t.YNc(14,Ct,2,1,"ng-container",1),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,s=t.oxw();return t.KtG(s.toggleArchiveOnNote(i))}),t._UZ(17,"mat-icon",32),t.qZA(),t.TgZ(18,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().ngIf,s=t.oxw();return t.KtG(s.deleteNote(i))}),t._UZ(19,"mat-icon",32),t.qZA()(),t.TgZ(20,"button",35),t._uU(21," Close "),t.qZA()(),t.BQk()}if(2&n){const e=t.MAs(13),o=t.oxw(2);t.xp6(4),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:photo"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:clipboard-document-list"),t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:tag"),t.xp6(3),t.Q6J("ngIf",t.lcZ(15,9,o.labels$)),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:archive-box"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:trash")}}function Tt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,pt,6,2,"ng-container",1),t.TgZ(2,"div",2)(3,"div")(4,"input",3),t.NdJ("ngModelChange",function(i){const c=t.CHM(e).ngIf;return t.KtG(c.title=i)})("input",function(){const s=t.CHM(e).ngIf,c=t.oxw();return t.KtG(c.updateNoteDetails(s))}),t.qZA()(),t.TgZ(5,"div",4)(6,"textarea",5),t.NdJ("ngModelChange",function(i){const c=t.CHM(e).ngIf;return t.KtG(c.content=i)})("input",function(){const s=t.CHM(e).ngIf,c=t.oxw();return t.KtG(c.updateNoteDetails(s))}),t.qZA()(),t.YNc(7,dt,7,4,"ng-container",1)(8,xt,3,2,"ng-container",1)(9,ht,4,2,"ng-container",1)(10,vt,22,11,"ng-container",1),t.qZA(),t.BQk()}if(2&n){const e=r.ngIf;t.xp6(1),t.Q6J("ngIf",e.image),t.xp6(3),t.Q6J("placeholder","Title")("ngModel",e.title),t.xp6(2),t.Q6J("placeholder","Note")("ngModel",e.content),t.xp6(1),t.Q6J("ngIf",e.tasks),t.xp6(1),t.Q6J("ngIf",e.labels&&e.labels.length),t.xp6(1),t.Q6J("ngIf",!e.id),t.xp6(1),t.Q6J("ngIf",e.id)}}let S=(()=>{class n{constructor(e,o,i,s){this._changeDetectorRef=e,this._data=o,this._notesService=i,this._matDialogRef=s,this.noteChanged=new x.x,this._unsubscribeAll=new x.x}ngOnInit(){this._data.note.id?(this._notesService.getNoteById(this._data.note.id).subscribe(),this.note$=this._notesService.note$):this.note$=(0,M.of)({id:null,title:"",content:"",tasks:null,image:null,reminder:null,labels:[],archived:!1,createdAt:null,updatedAt:null}),this.labels$=this._notesService.labels$,this.noteChanged.pipe((0,N.R)(this._unsubscribeAll),(0,D.b)(100),(0,y.w)(e=>this._notesService.updateNote(e))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createNote(e){this._notesService.createNote(e).pipe((0,k.U)(()=>{this.note$=this._notesService.note$})).subscribe()}uploadImage(e,o){if(!o.length)return;const s=o[0];["image/jpeg","image/png"].includes(s.type)&&this._readAsDataURL(s).then(c=>{e.image=c,this.noteChanged.next(e)})}removeImage(e){e.image=null,this.noteChanged.next(e)}addTasksToNote(e){e.tasks||(e.tasks=[])}addTaskToNote(e,o){""!==o.trim()&&this._notesService.addTask(e,o).subscribe()}removeTaskFromNote(e,o){e.tasks=e.tasks.filter(i=>i.id!==o.id),this.noteChanged.next(e)}updateTaskOnNote(e,o){o.id&&this.noteChanged.next(e)}isNoteHasLabel(e,o){return!!e.labels.find(i=>i.id===o.id)}toggleLabelOnNote(e,o){this.isNoteHasLabel(e,o)?e.labels=e.labels.filter(i=>i.id!==o.id):e.labels.push(o),this.noteChanged.next(e)}toggleArchiveOnNote(e){e.archived=!e.archived,this.noteChanged.next(e),this._matDialogRef.close()}updateNoteDetails(e){this.noteChanged.next(e)}deleteNote(e){this._notesService.deleteNote(e).subscribe(o=>{o&&this._matDialogRef.close()})}trackByFn(e,o){return o.id||e}_readAsDataURL(e){return new Promise((o,i)=>{const s=new FileReader;s.onload=()=>{o(s.result)},s.onerror=c=>{i(c)},s.readAsDataURL(e)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(t.sBO),t.Y36(m.WI),t.Y36(w),t.Y36(m.so))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["notes-details"]],standalone:!0,features:[t.jDz],decls:3,vars:3,consts:[[1,"flex","flex-col","flex-auto","md:w-160","md:min-w-160","-m-6"],[4,"ngIf"],[1,"m-4"],[1,"w-full","p-2","text-2xl",3,"placeholder","ngModel","ngModelChange","input"],[1,"flex","w-full","py-5","px-2"],["cdkTextareaAutosize","",1,"w-full",3,"placeholder","ngModel","ngModelChange","input"],[1,"relative","w-full"],[1,"absolute","right-0","bottom-0","p-4"],["mat-icon-button","",3,"click"],[1,"text-white",3,"svgIcon"],[1,"w-full","object-cover",3,"src"],[1,"mx-2","mt-4","space-y-1.5"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center"],[1,"-ml-0.5","icon-size-5","text-hint",3,"svgIcon"],[1,"w-full","ml-1.5","px-1","py-0.5",3,"placeholder","keydown.enter"],["newTaskInput",""],[1,"group","flex","items-center"],[1,"flex","items-center",3,"color","ngModel","ngModelChange","change"],[1,"w-full","px-1","py-0.5",3,"ngClass","placeholder","ngModel","ngModelChange","input"],[1,"hidden","group-hover:flex","ml-auto","icon-size-5","cursor-pointer",3,"svgIcon","click"],[1,"flex","flex-wrap","items-center","mx-1","mt-6"],[1,"flex","items-center","m-1","py-0.5","px-3","rounded-full","text-sm","font-medium","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"ml-1","icon-size-4","cursor-pointer",3,"svgIcon","click"],[1,"flex","items-center","justify-end","mt-4"],["mat-flat-button","",3,"color","disabled","click"],[1,"flex","items-center","justify-between","mt-4"],[1,"flex","items-center","space-x-2"],[2,"display","none"],["id","image-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["imageFileInput",""],["for","image-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-gray-400","hover:bg-opacity-20","dark:hover:bg-black","dark:hover:bg-opacity-5"],[3,"svgIcon"],["mat-icon-button","",3,"matMenuTriggerFor"],["labelsMenu","matMenu"],["mat-flat-button","","matDialogClose",""],[4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["disableRipple","",1,"flex","items-center","pointer-events-none",3,"color","checked"],[1,"ml-1","leading-5"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.YNc(1,Tt,11,9,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,i.note$)))},dependencies:[_.O5,p.ot,p.lW,p.RK,d.Ps,d.Hw,g.u5,g.Fj,g.JJ,g.On,L.Ky,L.IC,_.ax,F.p9,F.oG,_.mk,b.si,b.wG,T.Tx,T.VK,T.OP,T.p6,m.Is,m.ZT,_.Ov],encapsulation:2,changeDetection:0})}return n})();var Nt=a(2181);function yt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",13)(2,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.deleteLabel(s.id))}),t._UZ(3,"mat-icon",9),t.qZA(),t.TgZ(4,"input",15),t.NdJ("ngModelChange",function(i){const c=t.CHM(e).$implicit;return t.KtG(c.title=i)})("input",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.updateLabel(s))}),t.qZA()(),t.BQk()}if(2&n){const e=r.$implicit;t.xp6(3),t.Q6J("svgIcon","heroicons_solid:trash"),t.xp6(1),t.Q6J("autocomplete","off")("ngModel",e.title)}}function kt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,yt,5,3,"ng-container",12),t.BQk()),2&n){const e=r.ngIf,o=t.oxw();t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}let Zt=(()=>{class n{constructor(e,o){this._changeDetectorRef=e,this._notesService=o,this.labelChanged=new x.x,this._unsubscribeAll=new x.x}ngOnInit(){this.labels$=this._notesService.labels$,this.labelChanged.pipe((0,N.R)(this._unsubscribeAll),(0,D.b)(500),(0,Nt.h)(e=>""!==e.title.trim()),(0,y.w)(e=>this._notesService.updateLabel(e))).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addLabel(e){this._notesService.addLabel(e).subscribe()}updateLabel(e){this.labelChanged.next(e)}deleteLabel(e){this._notesService.deleteLabel(e).subscribe(()=>{this._changeDetectorRef.markForCheck()})}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(t.sBO),t.Y36(w))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["notes-labels"]],standalone:!0,features:[t.jDz],decls:14,vars:9,consts:[[1,"flex","flex-col","flex-auto","w-80","min-w-80","p-2","md:p-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold"],["matDialogClose","","mat-icon-button",""],[3,"svgIcon"],[1,"fuse-mat-dense","w-full","mt-8"],["name","new-label","matInput","",3,"autocomplete","placeholder"],["newLabelInput",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-col","mt-4"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"fuse-mat-dense","w-full"],["mat-icon-button","","matPrefix","",3,"click"],["required","","matInput","",3,"autocomplete","ngModel","ngModelChange","input"]],template:function(o,i){if(1&o){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Edit labels"),t.qZA(),t.TgZ(4,"button",3),t._UZ(5,"mat-icon",4),t.qZA()(),t.TgZ(6,"mat-form-field",5),t._UZ(7,"input",6,7),t.TgZ(9,"button",8),t.NdJ("click",function(){t.CHM(s);const l=t.MAs(8);return i.addLabel(l.value),t.KtG(l.value="")}),t._UZ(10,"mat-icon",9),t.qZA()(),t.TgZ(11,"div",10),t.YNc(12,kt,2,2,"ng-container",11),t.ALo(13,"async"),t.qZA()()}if(2&o){const s=t.MAs(8);t.xp6(5),t.Q6J("svgIcon","heroicons_outline:x-mark"),t.xp6(2),t.Q6J("autocomplete","off")("placeholder","Create new label"),t.xp6(2),t.ekj("invisible",""===s.value.trim()),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:check-circle"),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,7,i.labels$))}},dependencies:[p.ot,p.RK,m.Is,m.ZT,d.Ps,d.Hw,u.lN,u.KE,u.qo,u.R9,C.c,C.Nt,_.O5,_.ax,g.u5,g.Fj,g.JJ,g.Q7,g.On,_.Ov],encapsulation:2,changeDetection:0})}return n})();var It=a(2572),wt=a(3997);const J=(n,r)=>({"bg-gray-200 dark:bg-gray-700 text-primary dark:text-primary-400":n,"text-hint hover:bg-hover":r});function Jt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.filterByLabel(s.id))}),t._UZ(2,"mat-icon",7),t.TgZ(3,"div",8),t._uU(4),t.qZA()(),t.BQk()}if(2&n){const e=r.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(4,J,"label:"+e.id===o.filterStatus,"label:"+e.id!==o.filterStatus))("matRippleDisabled","label:"+e.id===o.filterStatus),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:tag"),t.xp6(2),t.Oqu(e.title)}}function Qt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,Jt,5,7,"ng-container",29),t.BQk()),2&n){const e=r.ngIf,o=t.oxw();t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}function At(n,r){if(1&n&&(t.ynx(0),t._UZ(1,"img",35),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}function Lt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",36),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.title," ")}}function Ft(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.ekj("text-xl",e.content.length<70),t.xp6(1),t.hij(" ",e.content," ")}}function Mt(n,r){1&n&&(t.ynx(0),t.TgZ(1,"div",39),t._UZ(2,"div",40),t.qZA(),t.BQk())}function Dt(n,r){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",41),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:check-circle"))}const Bt=n=>({"text-secondary line-through":n});function $t(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",15),t.YNc(2,Mt,3,0,"ng-container",9)(3,Dt,2,1,"ng-container",9),t.TgZ(4,"div",38),t._uU(5),t.qZA()(),t.BQk()),2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngIf",!e.completed),t.xp6(1),t.Q6J("ngIf",e.completed),t.xp6(1),t.Q6J("ngClass",t.VKq(4,Bt,e.completed)),t.xp6(1),t.hij(" ",e.content," ")}}function Ot(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",37),t.YNc(2,$t,6,6,"ng-container",29),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw(5);t.xp6(2),t.Q6J("ngForOf",e.tasks)("ngForTrackBy",o.trackByFn)}}function Ut(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",43),t._uU(2),t.qZA(),t.BQk()),2&n){const e=r.$implicit;t.xp6(2),t.hij(" ",e.title," ")}}function St(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",42),t.YNc(2,Ut,3,1,"ng-container",29),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw(5);t.xp6(2),t.Q6J("ngForOf",e.labels)("ngForTrackBy",o.trackByFn)}}function Kt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",33),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(5);return t.KtG(c.openNoteDialog(s))}),t.YNc(2,At,2,1,"ng-container",9),t.TgZ(3,"div",34),t.YNc(4,Lt,3,1,"ng-container",9)(5,Ft,3,3,"ng-container",9)(6,Ot,3,2,"ng-container",9)(7,St,3,2,"ng-container",9),t.qZA()(),t.BQk()}if(2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngIf",e.image),t.xp6(2),t.Q6J("ngIf",e.title),t.xp6(1),t.Q6J("ngIf",e.content),t.xp6(1),t.Q6J("ngIf",e.tasks),t.xp6(1),t.Q6J("ngIf",e.labels)}}function Yt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",32),t.YNc(2,Kt,8,5,"ng-container",29),t.qZA(),t.BQk()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("ngForOf",e.items)("ngForTrackBy",o.trackByFn)}}function Ht(n,r){if(1&n&&t.YNc(0,Yt,3,2,"ng-container",29),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}function Gt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"fuse-masonry",30),t.YNc(2,Ht,1,2,"ng-template",null,31,t.W1O),t.qZA(),t.BQk()),2&n){const e=t.MAs(3),o=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("items",o)("columns",i.masonryColumns)("columnsTemplate",e)}}function Et(n,r){if(1&n&&(t.ynx(0),t.YNc(1,Gt,4,3,"ng-container",26),t.BQk()),2&n){const e=r.ngIf;t.oxw();const o=t.MAs(39);t.xp6(1),t.Q6J("ngIf",e.length)("ngIfElse",o)}}function Rt(n,r){1&n&&(t.TgZ(0,"div",44)(1,"div",45),t._uU(2,"Loading..."),t.qZA()())}function qt(n,r){1&n&&(t.TgZ(0,"div",44),t._UZ(1,"mat-icon",46),t.TgZ(2,"div",45),t._uU(3,"There are no notes!"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:document"))}let jt=(()=>{class n{constructor(e,o,i,s){this._changeDetectorRef=e,this._fuseMediaWatcherService=o,this._matDialog=i,this._notesService=s,this.drawerMode="side",this.drawerOpened=!0,this.filter$=new f.X("notes"),this.searchQuery$=new f.X(null),this.masonryColumns=4,this._unsubscribeAll=new x.x}get filterStatus(){return this.filter$.value}ngOnInit(){this._notesService.getLabels().subscribe(),this._notesService.getNotes().subscribe(),this.labels$=this._notesService.labels$,this.notes$=(0,It.a)([this._notesService.notes$,this.filter$,this.searchQuery$]).pipe((0,wt.x)(),(0,k.U)(([e,o,i])=>{if(!e||!e.length)return;let s=e;i&&(i=i.trim().toLowerCase(),s=s.filter(l=>l.title.toLowerCase().includes(i)||l.content.toLowerCase().includes(i)));const c="archived"===o;if(s=s.filter(l=>l.archived===c),o.startsWith("label:")){const l=o.split(":")[1];s=s.filter(Wt=>!!Wt.labels.find(Xt=>Xt.id===l))}return s})),this._fuseMediaWatcherService.onMediaChange$.pipe((0,N.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this.masonryColumns=e.includes("xl")?5:e.includes("lg")?4:e.includes("md")?3:e.includes("sm")?2:1,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addNewNote(){this._matDialog.open(S,{autoFocus:!1,data:{note:{}}})}openEditLabelsDialog(){this._matDialog.open(Zt,{autoFocus:!1})}openNoteDialog(e){this._matDialog.open(S,{autoFocus:!1,data:{note:(0,Z.Z)(e)}})}filterByArchived(){this.filter$.next("archived")}filterByLabel(e){this.filter$.next(`label:${e}`)}filterByQuery(e){this.searchQuery$.next(e)}resetFilter(){this.filter$.next("notes")}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(t.sBO),t.Y36(A.T),t.Y36(m.uw),t.Y36(w))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["notes-list"]],standalone:!0,features:[t.jDz],decls:40,vars:29,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent"],[1,"w-2/3","sm:w-72","lg:w-56","border-r-0","bg-default",3,"mode","opened"],["drawer",""],[1,"p-6","lg:py-8","lg:pl-4","lg:pr-0"],[1,"space-y-2"],["matRipple","",1,"relative","flex","items-center","py-2","px-4","font-medium","rounded-full","cursor-pointer",3,"ngClass","matRippleDisabled","click"],[1,"text-current",3,"svgIcon"],[1,"ml-3","leading-5","select-none","text-default"],[4,"ngIf"],["matRipple","",1,"relative","flex","items-center","py-2","px-4","font-medium","rounded-full","cursor-pointer","hover:bg-hover",3,"click"],[1,"text-hint",3,"svgIcon"],[1,"ml-3","leading-5","select-none"],[1,"flex","flex-col","bg-gray-100","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","p-6","md:p-8"],[1,"flex","items-center"],[1,"flex","items-center","flex-auto"],["mat-icon-button","",1,"flex","lg:hidden","-ml-2",3,"click"],[3,"svgIcon"],[1,"fuse-mat-rounded","fuse-mat-dense","flex-auto","ml-4","lg:ml-0",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder","input"],["searchInput",""],["mat-flat-button","",1,"ml-4","px-1","sm:px-4","min-w-10",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"hidden","sm:inline-block","ml-2"],[4,"ngIf","ngIfElse"],["loading",""],["noNotes",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"-mx-2","mt-8",3,"items","columns","columnsTemplate"],["columnsTemplate",""],[1,"flex-1","px-2","space-y-4"],[1,"flex","flex-col","shadow","rounded-2xl","overflow-hidden","cursor-pointer","bg-card",3,"click"],[1,"flex","flex-auto","flex-col","p-6","space-y-4"],[1,"w-full","object-cover",3,"src"],[1,"font-semibold","line-clamp-3"],[1,"space-y-1.5"],[1,"ml-1.5","leading-5",3,"ngClass"],[1,"flex","items-center","justify-center","w-5","h-5"],[1,"w-4","h-4","rounded-full","border-2"],[1,"text-hint","icon-size-5",3,"svgIcon"],[1,"flex","flex-wrap","items-center","-m-1"],[1,"m-1","py-0.5","px-3","rounded-full","text-sm","font-medium","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"],[1,"icon-size-24",3,"svgIcon"]],template:function(o,i){if(1&o){const s=t.EpF();t.TgZ(0,"div",0)(1,"mat-drawer-container",1)(2,"mat-drawer",2,3)(4,"div",4)(5,"div",5)(6,"div",6),t.NdJ("click",function(){return i.resetFilter()}),t._UZ(7,"mat-icon",7),t.TgZ(8,"div",8),t._uU(9,"Notes"),t.qZA()(),t.TgZ(10,"div",6),t.NdJ("click",function(){return i.filterByArchived()}),t._UZ(11,"mat-icon",7),t.TgZ(12,"div",8),t._uU(13,"Archive"),t.qZA()(),t.YNc(14,Qt,2,2,"ng-container",9),t.ALo(15,"async"),t.TgZ(16,"div",10),t.NdJ("click",function(){return i.openEditLabelsDialog()}),t._UZ(17,"mat-icon",11),t.TgZ(18,"div",12),t._uU(19,"Edit labels"),t.qZA()()()()(),t.TgZ(20,"mat-drawer-content",13)(21,"div",14)(22,"div",15)(23,"div",16)(24,"button",17),t.NdJ("click",function(){t.CHM(s);const l=t.MAs(3);return t.KtG(l.toggle())}),t._UZ(25,"mat-icon",18),t.qZA(),t.TgZ(26,"mat-form-field",19),t._UZ(27,"mat-icon",20),t.TgZ(28,"input",21,22),t.NdJ("input",function(){t.CHM(s);const l=t.MAs(29);return t.KtG(i.filterByQuery(l.value))}),t.qZA()()(),t.TgZ(30,"button",23),t.NdJ("click",function(){return i.addNewNote()}),t._UZ(31,"mat-icon",24),t.TgZ(32,"span",25),t._uU(33,"New note"),t.qZA()()(),t.YNc(34,Et,2,2,"ng-container",26),t.ALo(35,"async"),t.YNc(36,Rt,3,0,"ng-template",null,27,t.W1O)(38,qt,4,1,"ng-template",null,28,t.W1O),t.qZA()()()()}if(2&o){const s=t.MAs(37);t.xp6(2),t.Q6J("mode",i.drawerMode)("opened",i.drawerOpened),t.xp6(4),t.Q6J("ngClass",t.WLB(23,J,"notes"===i.filterStatus,"notes"!==i.filterStatus))("matRippleDisabled","notes"===i.filterStatus),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:pencil-square"),t.xp6(3),t.Q6J("ngClass",t.WLB(26,J,"archived"===i.filterStatus,"archived"!==i.filterStatus))("matRippleDisabled","archived"===i.filterStatus),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:archive-box"),t.xp6(3),t.Q6J("ngIf",t.lcZ(15,19,i.labels$)),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:pencil"),t.xp6(8),t.Q6J("svgIcon","heroicons_outline:bars-3"),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:magnifying-glass"),t.xp6(1),t.Q6J("autocomplete","off")("placeholder","Search notes"),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:plus-circle"),t.xp6(3),t.Q6J("ngIf",t.lcZ(35,21,i.notes$))("ngIfElse",s)}},dependencies:[v.SJ,v.jA,v.kh,v.LW,b.si,b.wG,_.mk,d.Ps,d.Hw,_.O5,_.ax,p.ot,p.lW,p.RK,u.lN,u.KE,u.qo,C.c,C.Nt,G,_.Ov],encapsulation:2,changeDetection:0})}return n})();var zt=a(1331);const Vt=[{path:"",component:(()=>{class n{constructor(){}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["notes"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(o,i){1&o&&t._UZ(0,"router-outlet")},dependencies:[zt.lC],styles:["\n    .cdk-overlay-container{\n        overflow-y: scroll;\n    }\n"],encapsulation:2,changeDetection:0})}return n})(),children:[{path:"",component:jt}]}]}}]);