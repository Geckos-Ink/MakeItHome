<html>
    <head>
        <script src="./jquery-3.7.1.min.js"></script>

        <link rel="stylesheet" href="./fontawesome/css/all.min.css">

        <!-- OsenUI -->
        <link rel="stylesheet" href="./onsenui/css/onsenui.css">
        <link rel="stylesheet" href="./onsenui/css/dark-onsen-css-components.min.css">
        <script src="./onsenui/js/onsenui.min.js"></script>

        <!-- pickr (color picker) -->
        <script src="./thirds/pickr.min.js"></script>
        <link rel="stylesheet" href="./thirds/pickr.nano.min.css">

        <!-- Bootstrap 5 -->
        <link href="./thirds/bootstrap.min.css" rel="stylesheet">
        <script src="./thirds/bootstrap.bundle.min.js"></script>

        <style>
            @font-face {
                font-family: Lato;
                src: url(Lato-Light.ttf);
                font-weight: normal;
            }

            @font-face {
                font-family: Lato;
                src: url(Lato-Regular.ttf);
                font-weight: bold;
            }

            @font-face {
                font-family: OxygenMono;
                src: url(OxygenMono-Regular.ttf);
                font-weight: normal;
            }

            body {
                font-family: Lato;
            }

            .appExtension {
                width: 100%;
                height: 100%;
            }

            body {
                background-color: rgba(0,0,0,0) !important;
            }
        </style>
    </head>
    <body>
        
    </body>

    <script>
        let $body = $(document.body)

        function createAppExtension(bundleId){
            bundleId = bundleId.replaceAll(".", "-")
            let $ext = $('<div class="appExtension" id="'+bundleId+'">Extension not already loaded...</div>')
            $body.append($ext)
        }

        function setContent(bundleId, content){
            bundleId = bundleId.replaceAll(".", "-")
            let $ext = $('#'+bundleId)
            $ext.html(content)
        }

        function showAppExtension(bundleId){
            $(".appExtension").hide()

            bundleId = bundleId.replaceAll(".", "-")
            let $ext = $('#'+bundleId)
            $ext.show()
        }

        function sendMessage(message) {
            if(typeof(message) == 'object')
                message = JSON.stringify(message)

            console.log("sending message", message)
            message = encodeURIComponent(message)        
            window.location.href = "myapp://message?text=" + message;
        }

        function sendStatus(status){
            sendMessage({type:'status', value: status})
        }

        function closeOverscreen(){
            sendMessage({type:'closeOverscreen'})
        }
    </script>
</html>
